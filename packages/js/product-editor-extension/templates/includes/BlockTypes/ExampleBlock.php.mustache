<?php

namespace {{namespacePascalCase}}\BlockTypes;

use Automattic\WooCommerce\Admin\Blocks\AbstractBlock;

class ExampleBlock extends AbstractBlock {

    /**
	 * Block namespace.
	 *
	 * @var string
	 */
	protected $namespace = '{{namespace}}';

	/**
	 * Block name within this namespace.
	 *
	 * @var string
	 */
	protected $block_name = 'example-block';

    /**
     * Initialize the block.
     */
    public function init() {
        parent::init();
        add_action( 'woocommerce_block_template_register', 'add_block_to_simple_product_template' );
    }

    /**
     * Add the block to the simple product template.
     */
    public function add_block_to_simple_product_template( BlockTemplateInterface $template ) {
		if ( $template instanceof ProductFormTemplateInterface && 'simple-product' === $template->get_id() ) {
			$section = $template->get_section_by_id( 'product-catalog-section' );
			$section->add_block(
				[
					'id'         => 'example-block',
					'blockName'  => $this->get_block_type(),
					'order'      => 15,
					'attributes' => [
						'message' => __( 'My custom message', '{{textdomain}}' ),
					],
				]
			);
		}
    }

}